(this["webpackJsonpfinger-guess"]=this["webpackJsonpfinger-guess"]||[]).push([[0],{57:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(3),s=a(38),r=a.n(s),c=a(20),i=a(21),l=a(23),o=a(22),h=a(26),u=a(36),d=a(6),p=a(10),b=a(30);a(44),a(46),a(59);b.a.initializeApp({apiKey:"AIzaSyAHYCLV-AnAFMLUJMSWup_J7YbmRJo-px4",authDomain:"finger-guess.firebaseapp.com",projectId:"finger-guess",storageBucket:"finger-guess.appspot.com",messagingSenderId:"1038015472766",appId:"1:1038015472766:web:6b8a2464533ce75fe6642f",measurementId:"G-712J1S0L3V"});var j=b.a.auth,m=b.a.firestore(),x=a(2);var O=function(){return Object(x.jsx)("header",{children:Object(x.jsxs)("nav",{className:"navbar navbar-expand-sm fixed-top navbar-light bg-light",children:[Object(x.jsx)(p.b,{className:"navbar-brand",to:"/",children:"Finger-Guessing"}),Object(x.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(x.jsx)("span",{className:"navbar-toggler-icon"})}),Object(x.jsx)("div",{className:"collapse navbar-collapse justify-content-end",id:"navbarNavAltMarkup",children:j().currentUser?Object(x.jsxs)("div",{className:"navbar-nav",children:[Object(x.jsx)(p.b,{className:"nav-item nav-link mr-3",to:"/guess",children:"Profile"}),Object(x.jsx)("button",{className:"btn btn-primary mr-3",onClick:function(){return j().signOut()},children:"Logout"})]}):Object(x.jsxs)("div",{className:"navbar-nav",children:[Object(x.jsx)(p.b,{className:"nav-item nav-link mr-3",to:"/login",children:"Sign In"}),Object(x.jsx)(p.b,{className:"nav-item nav-link mr-3",to:"/signup",children:"Sign Up"})]})})]})})};var v=function(){return Object(x.jsx)("footer",{className:"pt-5",children:Object(x.jsx)("div",{className:"container text-center",children:Object(x.jsx)("p",{children:"\xa9 Finger-Guessing 2021."})})})},f=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(x.jsxs)("div",{className:"home",children:[Object(x.jsx)(O,{}),Object(x.jsx)("section",{children:Object(x.jsx)("div",{className:"jumbotron jumbotron-fluid py-5",children:Object(x.jsxs)("div",{className:"container text-center py-5",children:[Object(x.jsx)("h1",{className:"display-4",children:"Welcome to Finger-Guessing"}),Object(x.jsxs)("div",{className:"mt-4",children:[Object(x.jsx)(p.b,{className:"btn btn-primary px-5 mr-3",to:"/signup",children:"Create New Account"}),Object(x.jsx)(p.b,{className:"btn px-5",to:"/login",children:"Login to Your Account"})]})]})})}),Object(x.jsx)(v,{})]})}}]),a}(n.Component),g=a(9),y=a.n(g),N=a(19),k=a(13),w=a(27),S=a(16),C=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).setupBeforeUnloadListener=function(){window.addEventListener("beforeunload",n.handleForceReset)},n.state={user:j().currentUser,isfinish:!1,role:"",player1:"",player2:"",winner:"",content:"",readError:null,writeError:null},n.handleReset=n.handleReset.bind(Object(k.a)(n)),n.handleForceReset=n.handleForceReset.bind(Object(k.a)(n)),n.chooseHand=[n.onRadioPress.bind(Object(k.a)(n),"paper"),n.onRadioPress.bind(Object(k.a)(n),"rock"),n.onRadioPress.bind(Object(k.a)(n),"scissors")],n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(N.a)(y.a.mark((function e(){var t=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setupBeforeUnloadListener(),this.setState({readError:null});try{m.collection("game").onSnapshot((function(e){e.forEach((function(e){if("guess"===e.id){var a=e.data();t.handleJudge(a)}}))}))}catch(a){this.setState({readError:a.message})}case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.handleForceReset)}},{key:"handleForceReset",value:function(){var e=Object(N.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==this.state.player1||""!==this.state.player2)try{m.collection("game").doc("guess").update({player1:"",player2:"",winner:""})}catch(a){this.setState({readError:a.message})}case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleReset",value:function(){var e=Object(N.a)(y.a.mark((function e(t){var a=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),m.collection("game").get().then((function(e){e.forEach((function(e){"guess"===e.id&&(""!==e.data().winner&&m.collection("game").doc("guess").update({player1:"",player2:"",winner:""}),a.setState({role:"",player1:"",player2:"",content:""}))}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleJudge",value:function(){var e=Object(N.a)(y.a.mark((function e(t){var a,n,s,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.state.role,n=this.state.content,s=this.state.winner,r=this.state.isfinish,""===t.player1&&""===t.player2&&""===t.winner&&!0===r&&this.setState({role:"",player1:"",player2:"",winner:"",content:"",isfinish:!1}),""!==t.player1&&""!==t.player2?("player1"===a?n===t.player2?s="draw":"paper"===n?s="rock"===t.player2?"player1":"player2":"rock"===n?s="scissors"===t.player2?"player1":"player2":"scissors"===n&&(s="paper"===t.player2?"player1":"player2"):"player2"===a&&(n===t.player1?s="draw":"paper"===n?s="rock"===t.player1?"player2":"player1":"rock"===n?s="scissors"===t.player1?"player2":"player1":"scissors"===n&&(s="paper"===t.player1?"player2":"player1")),""!==s&&m.collection("game").doc("guess").update({winner:s}),this.setState({player1:t.player1,player2:t.player2,winner:s})):this.setState({player1:t.player1,player2:t.player2,winner:t.winner});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(N.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({writeError:null}),e.prev=2,""!==this.state.player1){e.next=8;break}return e.next=6,m.collection("game").doc("guess").update({player1:this.state.content});case 6:e.next=10;break;case 8:return e.next=10,m.collection("game").doc("guess").update({player2:this.state.content});case 10:this.setState({content:""}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),this.setState({writeError:e.t0.message});case 16:case"end":return e.stop()}}),e,this,[[2,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onRadioPress",value:function(){var e=Object(N.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="","player1"!==this.state.role){e.next=7;break}return a=this.state.role,e.next=5,m.collection("game").doc("guess").update({player1:t});case 5:e.next=23;break;case 7:if("player2"!==this.state.role){e.next=13;break}return a=this.state.role,e.next=11,m.collection("game").doc("guess").update({player2:t});case 11:e.next=23;break;case 13:if(""!==this.state.player1){e.next=19;break}return e.next=16,m.collection("game").doc("guess").update({player1:t});case 16:a="player1",e.next=23;break;case 19:if(""===this.state.player1||""!==this.state.player2){e.next=23;break}return e.next=22,m.collection("game").doc("guess").update({player2:t});case 22:a="player2";case 23:this.setState({content:t,role:a,isfinish:!0});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderLoading",value:function(){return Object(x.jsx)("div",{className:"loading",children:Object(x.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(x.jsx)("span",{className:"sr-only",children:"Loading..."})})})}},{key:"render",value:function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)(O,{}),Object(x.jsxs)("div",{className:"result-area align-items-center",children:[""!==this.state.content?Object(x.jsxs)("div",{className:"user-side",children:[Object(x.jsx)("div",{children:"Your Hand"}),Object(x.jsx)("label",{className:"result-label",children:Object(x.jsx)(w.a,{icon:"paper"===this.state.content?S.a:"rock"===this.state.content?S.b:S.c})})]}):Object(x.jsx)("div",{}),Object(x.jsx)("div",{className:"vs-label",children:""!==this.state.content?Object(x.jsx)("div",{children:"VS"}):""}),Object(x.jsxs)("div",{className:"other-side",children:[""!==this.state.content?Object(x.jsx)("div",{children:"Other Hand"}):"",""!==this.state.role?"player1"===this.state.role?""!==this.state.player2?Object(x.jsx)("label",{className:"result-label",children:Object(x.jsx)(w.a,{icon:"paper"===this.state.player2?S.a:"rock"===this.state.player2?S.b:S.c})}):this.renderLoading():""!==this.state.player1?Object(x.jsx)("label",{className:"result-label",children:Object(x.jsx)(w.a,{icon:"paper"===this.state.player1?S.a:"rock"===this.state.player1?S.b:S.c})}):this.renderLoading():""]}),""!==this.state.winner?Object(x.jsxs)("div",{className:"result-winner",children:[Object(x.jsx)("div",{children:this.state.winner===this.state.role?"You win!":"draw"===this.state.winner?"Draw":"You Lose!"}),Object(x.jsx)("button",{className:"btn btn-dark reset-btn",onClick:this.handleReset,children:Object(x.jsx)("span",{children:"Play Again"})})]}):""]}),!1===this.state.isfinish?Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{className:"col-12 pb-2 icons-title",children:Object(x.jsx)("span",{children:"Choose your hand :"})}),Object(x.jsxs)("div",{className:"col-12 pb-5",children:[Object(x.jsx)("input",{className:"checkbox-tools",type:"radio",name:"tools",value:"paper",id:"tool-1",onClick:this.chooseHand[0]}),Object(x.jsx)("label",{className:"for-checkbox-tools",htmlFor:"tool-1",children:Object(x.jsx)(w.a,{icon:S.a,size:"2x"})}),Object(x.jsx)("input",{className:"checkbox-tools",type:"radio",name:"tools",value:"Rock",id:"tool-3",onClick:this.chooseHand[1]}),Object(x.jsx)("label",{className:"for-checkbox-tools",htmlFor:"tool-3",children:Object(x.jsx)(w.a,{icon:S.b,size:"2x"})}),Object(x.jsx)("input",{className:"checkbox-tools",type:"radio",name:"tools",value:"scissors",id:"tool-2",onClick:this.chooseHand[2]}),Object(x.jsx)("label",{className:"for-checkbox-tools",htmlFor:"tool-2",children:Object(x.jsx)(w.a,{icon:S.c,size:"2x"})})]})]}):""===this.state.winner?Object(x.jsx)("div",{className:"col-12 pb-2",children:Object(x.jsx)("span",{children:"Waiting other choose hand..."})}):"",Object(x.jsxs)("div",{className:"py-5 mx-3",children:["Login in as: ",Object(x.jsx)("strong",{className:"text-info",children:this.state.user.email})]})]})}}]),a}(n.Component),L=a(28);var E=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={error:null,email:"",password:""},e.handleChange=e.handleChange.bind(Object(k.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(k.a)(e)),e}return Object(i.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(L.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(N.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({error:""}),e.prev=2,e.next=5,a=this.state.email,n=this.state.password,j().createUserWithEmailAndPassword(a,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.setState({error:e.t0.message});case 10:case"end":return e.stop()}var a,n}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("form",{className:"mt-5 py-5 px-5",onSubmit:this.handleSubmit,children:[Object(x.jsxs)("h1",{children:["Sign Up to",Object(x.jsx)(p.b,{className:"title ml-2",to:"/",children:"Finger-Guessing"})]}),Object(x.jsx)("p",{className:"lead",children:"Fill in the form below to create an account."}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("input",{className:"form-control",placeholder:"Email",name:"email",type:"email",onChange:this.handleChange,value:this.state.email})}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("input",{className:"form-control",placeholder:"Password",name:"password",onChange:this.handleChange,value:this.state.password,type:"password"})}),Object(x.jsxs)("div",{className:"form-group",children:[this.state.error?Object(x.jsx)("p",{className:"text-danger",children:this.state.error}):null,Object(x.jsx)("button",{className:"btn btn-primary px-5",type:"submit",children:"Sign up"})]}),Object(x.jsx)("hr",{}),Object(x.jsxs)("p",{children:["Already have an account? ",Object(x.jsx)(p.b,{to:"/login",children:"Login"})]})]})})}}]),a}(n.Component),F=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={error:null,email:"",password:""},e.handleChange=e.handleChange.bind(Object(k.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(k.a)(e)),e}return Object(i.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(L.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(N.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({error:""}),e.prev=2,e.next=5,a=this.state.email,n=this.state.password,j().signInWithEmailAndPassword(a,n);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.setState({error:e.t0.message});case 10:case"end":return e.stop()}var a,n}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("form",{className:"mt-5 py-5 px-5",autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(x.jsxs)("h1",{children:["Login to",Object(x.jsx)(p.b,{className:"title ml-2",to:"/",children:"Finger-Guessing"})]}),Object(x.jsx)("p",{className:"lead",children:"Fill in the form below to login to your account."}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("input",{className:"form-control",placeholder:"Email",name:"email",type:"email",onChange:this.handleChange,value:this.state.email})}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("input",{className:"form-control",placeholder:"Password",name:"password",onChange:this.handleChange,value:this.state.password,type:"password"})}),Object(x.jsxs)("div",{className:"form-group",children:[this.state.error?Object(x.jsx)("p",{className:"text-danger",children:this.state.error}):null,Object(x.jsx)("button",{className:"btn btn-primary px-5",type:"submit",children:"Login"})]}),Object(x.jsx)("hr",{}),Object(x.jsxs)("p",{children:["Don't have an account? ",Object(x.jsx)(p.b,{to:"/signup",children:"Sign up"})]})]})})}}]),a}(n.Component);a(57);function A(e){var t=e.component,a=e.authenticated,n=Object(u.a)(e,["component","authenticated"]);return Object(x.jsx)(d.b,Object(h.a)(Object(h.a)({},n),{},{render:function(e){return!0===a?Object(x.jsx)(t,Object(h.a)({},e)):Object(x.jsx)(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}function R(e){var t=e.component,a=e.authenticated,n=Object(u.a)(e,["component","authenticated"]);return Object(x.jsx)(d.b,Object(h.a)(Object(h.a)({},n),{},{render:function(e){return!1===a?Object(x.jsx)(t,Object(h.a)({},e)):Object(x.jsx)(d.a,{to:"/guess"})}}))}var D=function(e){Object(l.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={authenticated:!1,loading:!0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;j().onAuthStateChanged((function(t){t?e.setState({authenticated:!0,loading:!1}):e.setState({authenticated:!1,loading:!1})}))}},{key:"render",value:function(){return!0===this.state.loading?Object(x.jsx)("div",{className:"spinner-border text-success",role:"status",children:Object(x.jsx)("span",{className:"sr-only",children:"Loading..."})}):Object(x.jsx)(p.a,{children:Object(x.jsxs)(d.d,{children:[Object(x.jsx)(d.b,{exact:!0,path:"/",component:f}),Object(x.jsx)(A,{path:"/guess",authenticated:this.state.authenticated,component:C}),Object(x.jsx)(R,{path:"/signup",authenticated:this.state.authenticated,component:E}),Object(x.jsx)(R,{path:"/login",authenticated:this.state.authenticated,component:F})]})})}}]),a}(n.Component),P=document.getElementById("root");r.a.render(Object(x.jsx)(D,{}),P)}},[[58,1,2]]]);
//# sourceMappingURL=main.3eb8e23d.chunk.js.map